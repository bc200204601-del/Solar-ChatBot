<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Solar Chatbot – Rawalpindi</title>
<script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"></script>
<style>
body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin:0; }
main { max-width:800px; margin:48px auto; padding:0 16px; }
h1 { margin-bottom:8px; }
.button-container { display:flex; flex-wrap:wrap; gap:12px; margin:16px 0; }
button { padding:10px 16px; border:none; border-radius:5px; background:#0b57d0; color:#fff; cursor:pointer; }
button:hover{ background:#0845a1; }
.pricing-calculator { display:none; margin-top:24px; padding:16px; border:1px solid #ccc; border-radius:8px; max-width:400px; }
#priceResult { margin-top:12px; font-weight:bold; }
</style>
</head>
<body>
<main>
<h1>Solar Chatbot – Rawalpindi (RWP)</h1>
<div class="button-container">
<button onclick="sendEvent('Get_System_Size')">System Size</button>
<button onclick="showCalculator()">Cost Estimate</button>
<button onclick="sendEvent('Learn_Net_Metering')">Net Metering</button>
<button onclick="sendEvent('Solar_FAQ')">FAQs</button>
</div>

<!-- Quick Price Calculator -->
<div class="pricing-calculator" id="calculator">
<h3>Quick Price Calculator</h3>
<select id="systemSize">
<option value="3">3kW</option>
<option value="5">5kW</option>
<option value="10">10kW</option>
<option value="15">15kW</option>
<option value="20">20kW</option>
</select>
<button onclick="calculatePrice()">Calculate Price</button>
<div id="priceResult"></div>
</div>
</main>

<df-messenger chat-title="Solar RWP Bot" agent-id="728466b3-b1f9-4094-9b64-ece38da84ac2" language-code="en"></df-messenger>

<script>
const dfMessenger = document.querySelector('df-messenger');
function sendEvent(eventName){ dfMessenger.renderCustomText(`__event__:${eventName}`); }

function showCalculator(){
  sendEvent('Check_Cost'); 
  document.getElementById('calculator').style.display='block';
}

const costBreakdown = {
3:{total:650000, panels:300000, inverter:80000, installation:270000},
5:{total:950000, panels:450000, inverter:120000, installation:380000},
10:{total:1750000, panels:850000, inverter:250000, installation:650000},
15:{total:2500000, panels:1200000, inverter:350000, installation:950000},
20:{total:3200000, panels:1600000, inverter:450000, installation:1150000}
};

function calculatePrice(){
  const size=document.getElementById('systemSize').value;
  const price=costBreakdown[size];
  document.getElementById('priceResult').innerHTML=
    `Estimated total: PKR ${price.total.toLocaleString()}<br>
     Breakdown:<br>
     • Panels: PKR ${price.panels.toLocaleString()}<br>
     • Inverter: PKR ${price.inverter.toLocaleString()}<br>
     • Installation: PKR ${price.installation.toLocaleString()}`;
}
</script>
</body>
</html>
